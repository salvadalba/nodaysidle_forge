# CLAUDE.md

## Project: Forge

## Stack
Use Swift 6 strict concurrency with @Sendable and actor isolation throughout

## Key Rules
- Target macOS 15+ (Sequoia) on Apple Silicon exclusively via SwiftPM
- Use @Observable macro from Observation framework instead of ObservableObject
- Make all shared types Codable and Sendable in ForgeShared target
- Use structured concurrency (TaskGroup, async let) for all parallel work

## Do NOT
- introduce any Electron, web, or cross-platform UI frameworks
- use Combine or ObservableObject — use Observation framework only
- add any network entitlements or server dependencies — local-first only
- use Xcode project files — SwiftPM Package.swift is the sole build system
- use rope data structure — gap buffer is the launch implementation

## Doc Structure
This project uses a 5-document specification system generated by the nodaysidle-compiler.

**Read order for building:**
1. **AGENT.md** — Global rules and structured task prompts (READ FIRST for constraints)
2. **TRD.md** — API contracts, data models, module interfaces, testing strategy
3. **TASKS.md** — Phased task breakdown with acceptance criteria
4. **ARD.md** — Architecture decisions and trade-offs
5. **PRD.md** — Product requirements (tiebreaker for ambiguity)

**Execution protocol:**
- Extract Do/Don't rules from AGENT.md as hard constraints
- Execute tasks in phase order from TASKS.md
- For each task, follow the matching task_prompt from AGENT.md
- Create only the files listed in files_to_create
- Run validation_cmd before moving to next task
- Check acceptance criteria from TASKS.md before marking complete
- NEVER add features beyond acceptance criteria
